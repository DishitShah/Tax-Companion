{"ast":null,"code":"import React,{useState,useCallback}from'react';import{useDropzone}from'react-dropzone';import{useDispatch}from'react-redux';import{uploadDocument}from'../../redux/actions/documentActions';import Button from'../common/Button';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DocumentUpload=()=>{const[files,setFiles]=useState([]);const[uploadProgress,setUploadProgress]=useState({});const dispatch=useDispatch();const onDrop=useCallback(acceptedFiles=>{const newFiles=acceptedFiles.map(file=>Object.assign(file,{preview:URL.createObjectURL(file)}));setFiles(prevFiles=>[...prevFiles,...newFiles]);},[]);const{getRootProps,getInputProps,isDragActive}=useDropzone({onDrop,accept:{'application/pdf':['.pdf'],'image/jpeg':['.jpeg','.jpg'],'image/png':['.png'],'application/msword':['.doc','.docx']},maxSize:5*1024*1024// 5MB\n});const removeFile=file=>{setFiles(prevFiles=>prevFiles.filter(f=>f!==file));};const uploadFiles=()=>{files.forEach(file=>{const formData=new FormData();formData.append('document',file);dispatch(uploadDocument(formData,{onUploadProgress:progressEvent=>{const percentCompleted=Math.round(progressEvent.loaded*100/progressEvent.total);setUploadProgress(prev=>({...prev,[file.name]:percentCompleted}));}}));});};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-white shadow-md rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{...getRootProps(),className:`\n          border-2 border-dashed p-8 text-center \n          ${isDragActive?'border-blue-500 bg-blue-50':'border-gray-300'}\n        `,children:[/*#__PURE__*/_jsx(\"input\",{...getInputProps()}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:isDragActive?'Drop the files here...':'Drag \\'n\\' drop documents here, or click to select files'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"(PDF, JPEG, PNG, DOC - Max 5MB)\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:files.map(file=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-2 bg-gray-100 mb-2 rounded\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:file.name}),uploadProgress[file.name]&&/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2.5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 h-2.5 rounded-full\",style:{width:`${uploadProgress[file.name]}%`}})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFile(file),className:\"text-red-500 hover:text-red-700\",children:\"Remove\"})]},file.name))}),files.length>0&&/*#__PURE__*/_jsx(Button,{onClick:uploadFiles,className:\"mt-4 w-full\",children:\"Upload Documents\"})]});};export default DocumentUpload;","map":{"version":3,"names":["React","useState","useCallback","useDropzone","useDispatch","uploadDocument","Button","jsx","_jsx","jsxs","_jsxs","DocumentUpload","files","setFiles","uploadProgress","setUploadProgress","dispatch","onDrop","acceptedFiles","newFiles","map","file","Object","assign","preview","URL","createObjectURL","prevFiles","getRootProps","getInputProps","isDragActive","accept","maxSize","removeFile","filter","f","uploadFiles","forEach","formData","FormData","append","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","prev","name","className","children","style","width","onClick","length"],"sources":["C:/Users/chira/OneDrive/Desktop/tax-companion-frontend/src/components/documents/DocumentUpload.jsx"],"sourcesContent":["import React, { useState, useCallback } from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { useDispatch } from 'react-redux';\r\nimport { uploadDocument } from '../../redux/actions/documentActions';\r\nimport Button from '../common/Button';\r\n\r\nconst DocumentUpload = () => {\r\n  const [files, setFiles] = useState([]);\r\n  const [uploadProgress, setUploadProgress] = useState({});\r\n  const dispatch = useDispatch();\r\n\r\n  const onDrop = useCallback(acceptedFiles => {\r\n    const newFiles = acceptedFiles.map(file => Object.assign(file, {\r\n      preview: URL.createObjectURL(file)\r\n    }));\r\n    \r\n    setFiles(prevFiles => [...prevFiles, ...newFiles]);\r\n  }, []);\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop,\r\n    accept: {\r\n      'application/pdf': ['.pdf'],\r\n      'image/jpeg': ['.jpeg', '.jpg'],\r\n      'image/png': ['.png'],\r\n      'application/msword': ['.doc', '.docx']\r\n    },\r\n    maxSize: 5 * 1024 * 1024 // 5MB\r\n  });\r\n\r\n  const removeFile = (file) => {\r\n    setFiles(prevFiles => prevFiles.filter(f => f !== file));\r\n  };\r\n\r\n  const uploadFiles = () => {\r\n    files.forEach(file => {\r\n      const formData = new FormData();\r\n      formData.append('document', file);\r\n\r\n      dispatch(uploadDocument(formData, {\r\n        onUploadProgress: (progressEvent) => {\r\n          const percentCompleted = Math.round(\r\n            (progressEvent.loaded * 100) / progressEvent.total\r\n          );\r\n          setUploadProgress(prev => ({\r\n            ...prev,\r\n            [file.name]: percentCompleted\r\n          }));\r\n        }\r\n      }));\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 bg-white shadow-md rounded-lg\">\r\n      <div \r\n        {...getRootProps()}\r\n        className={`\r\n          border-2 border-dashed p-8 text-center \r\n          ${isDragActive ? 'border-blue-500 bg-blue-50' : 'border-gray-300'}\r\n        `}\r\n      >\r\n        <input {...getInputProps()} />\r\n        <p className=\"text-gray-600\">\r\n          {isDragActive \r\n            ? 'Drop the files here...' \r\n            : 'Drag \\'n\\' drop documents here, or click to select files'}\r\n        </p>\r\n        <p className=\"text-sm text-gray-500 mt-2\">\r\n          (PDF, JPEG, PNG, DOC - Max 5MB)\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"mt-4\">\r\n        {files.map(file => (\r\n          <div key={file.name} className=\"flex items-center justify-between p-2 bg-gray-100 mb-2 rounded\">\r\n            <div>\r\n              <p>{file.name}</p>\r\n              {uploadProgress[file.name] && (\r\n                <div className=\"w-full bg-gray-200 rounded-full h-2.5\">\r\n                  <div \r\n                    className=\"bg-blue-600 h-2.5 rounded-full\" \r\n                    style={{width: `${uploadProgress[file.name]}%`}}\r\n                  ></div>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <button \r\n              onClick={() => removeFile(file)}\r\n              className=\"text-red-500 hover:text-red-700\"\r\n            >\r\n              Remove\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {files.length > 0 && (\r\n        <Button \r\n          onClick={uploadFiles}\r\n          className=\"mt-4 w-full\"\r\n        >\r\n          Upload Documents\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentUpload;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}