{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chira\\\\OneDrive\\\\Desktop\\\\tax-companion-frontend\\\\src\\\\components\\\\documents\\\\DocumentUpload.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { useDispatch } from 'react-redux';\nimport { uploadDocument } from '../../redux/actions/documentActions';\nimport Button from '../common/Button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DocumentUpload = () => {\n  _s();\n  const [files, setFiles] = useState([]);\n  const [uploadProgress, setUploadProgress] = useState({});\n  const dispatch = useDispatch();\n  const onDrop = useCallback(acceptedFiles => {\n    const newFiles = acceptedFiles.map(file => Object.assign(file, {\n      preview: URL.createObjectURL(file)\n    }));\n    setFiles(prevFiles => [...prevFiles, ...newFiles]);\n  }, []);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    accept: {\n      'application/pdf': ['.pdf'],\n      'image/jpeg': ['.jpeg', '.jpg'],\n      'image/png': ['.png'],\n      'application/msword': ['.doc', '.docx']\n    },\n    maxSize: 5 * 1024 * 1024 // 5MB\n  });\n  const removeFile = file => {\n    setFiles(prevFiles => prevFiles.filter(f => f !== file));\n  };\n  const uploadFiles = () => {\n    files.forEach(file => {\n      const formData = new FormData();\n      formData.append('document', file);\n      dispatch(uploadDocument(formData, {\n        onUploadProgress: progressEvent => {\n          const percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n          setUploadProgress(prev => ({\n            ...prev,\n            [file.name]: percentCompleted\n          }));\n        }\n      }));\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-white shadow-md rounded-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ...getRootProps(),\n      className: `\n          border-2 border-dashed p-8 text-center \n          ${isDragActive ? 'border-blue-500 bg-blue-50' : 'border-gray-300'}\n        `,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ...getInputProps()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600\",\n        children: isDragActive ? 'Drop the files here...' : 'Drag \\'n\\' drop documents here, or click to select files'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-500 mt-2\",\n        children: \"(PDF, JPEG, PNG, DOC - Max 5MB)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4\",\n      children: files.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-2 bg-gray-100 mb-2 rounded\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: file.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this), uploadProgress[file.name] && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full bg-gray-200 rounded-full h-2.5\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-blue-600 h-2.5 rounded-full\",\n              style: {\n                width: `${uploadProgress[file.name]}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => removeFile(file),\n          className: \"text-red-500 hover:text-red-700\",\n          children: \"Remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this)]\n      }, file.name, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), files.length > 0 && /*#__PURE__*/_jsxDEV(Button, {\n      onClick: uploadFiles,\n      className: \"mt-4 w-full\",\n      children: \"Upload Documents\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(DocumentUpload, \"PS6pE0g7sbrFq6HGCtLUfYOJlrk=\", false, function () {\n  return [useDispatch, useDropzone];\n});\n_c = DocumentUpload;\nexport default DocumentUpload;\nvar _c;\n$RefreshReg$(_c, \"DocumentUpload\");","map":{"version":3,"names":["React","useState","useCallback","useDropzone","useDispatch","uploadDocument","Button","jsxDEV","_jsxDEV","DocumentUpload","_s","files","setFiles","uploadProgress","setUploadProgress","dispatch","onDrop","acceptedFiles","newFiles","map","file","Object","assign","preview","URL","createObjectURL","prevFiles","getRootProps","getInputProps","isDragActive","accept","maxSize","removeFile","filter","f","uploadFiles","forEach","formData","FormData","append","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","prev","name","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","width","onClick","length","_c","$RefreshReg$"],"sources":["C:/Users/chira/OneDrive/Desktop/tax-companion-frontend/src/components/documents/DocumentUpload.jsx"],"sourcesContent":["import React, { useState, useCallback } from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { useDispatch } from 'react-redux';\r\nimport { uploadDocument } from '../../redux/actions/documentActions';\r\nimport Button from '../common/Button';\r\n\r\nconst DocumentUpload = () => {\r\n  const [files, setFiles] = useState([]);\r\n  const [uploadProgress, setUploadProgress] = useState({});\r\n  const dispatch = useDispatch();\r\n\r\n  const onDrop = useCallback(acceptedFiles => {\r\n    const newFiles = acceptedFiles.map(file => Object.assign(file, {\r\n      preview: URL.createObjectURL(file)\r\n    }));\r\n    \r\n    setFiles(prevFiles => [...prevFiles, ...newFiles]);\r\n  }, []);\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop,\r\n    accept: {\r\n      'application/pdf': ['.pdf'],\r\n      'image/jpeg': ['.jpeg', '.jpg'],\r\n      'image/png': ['.png'],\r\n      'application/msword': ['.doc', '.docx']\r\n    },\r\n    maxSize: 5 * 1024 * 1024 // 5MB\r\n  });\r\n\r\n  const removeFile = (file) => {\r\n    setFiles(prevFiles => prevFiles.filter(f => f !== file));\r\n  };\r\n\r\n  const uploadFiles = () => {\r\n    files.forEach(file => {\r\n      const formData = new FormData();\r\n      formData.append('document', file);\r\n\r\n      dispatch(uploadDocument(formData, {\r\n        onUploadProgress: (progressEvent) => {\r\n          const percentCompleted = Math.round(\r\n            (progressEvent.loaded * 100) / progressEvent.total\r\n          );\r\n          setUploadProgress(prev => ({\r\n            ...prev,\r\n            [file.name]: percentCompleted\r\n          }));\r\n        }\r\n      }));\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 bg-white shadow-md rounded-lg\">\r\n      <div \r\n        {...getRootProps()}\r\n        className={`\r\n          border-2 border-dashed p-8 text-center \r\n          ${isDragActive ? 'border-blue-500 bg-blue-50' : 'border-gray-300'}\r\n        `}\r\n      >\r\n        <input {...getInputProps()} />\r\n        <p className=\"text-gray-600\">\r\n          {isDragActive \r\n            ? 'Drop the files here...' \r\n            : 'Drag \\'n\\' drop documents here, or click to select files'}\r\n        </p>\r\n        <p className=\"text-sm text-gray-500 mt-2\">\r\n          (PDF, JPEG, PNG, DOC - Max 5MB)\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"mt-4\">\r\n        {files.map(file => (\r\n          <div key={file.name} className=\"flex items-center justify-between p-2 bg-gray-100 mb-2 rounded\">\r\n            <div>\r\n              <p>{file.name}</p>\r\n              {uploadProgress[file.name] && (\r\n                <div className=\"w-full bg-gray-200 rounded-full h-2.5\">\r\n                  <div \r\n                    className=\"bg-blue-600 h-2.5 rounded-full\" \r\n                    style={{width: `${uploadProgress[file.name]}%`}}\r\n                  ></div>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <button \r\n              onClick={() => removeFile(file)}\r\n              className=\"text-red-500 hover:text-red-700\"\r\n            >\r\n              Remove\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {files.length > 0 && (\r\n        <Button \r\n          onClick={uploadFiles}\r\n          className=\"mt-4 w-full\"\r\n        >\r\n          Upload Documents\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentUpload;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}